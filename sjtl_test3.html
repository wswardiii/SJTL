<!-- Note: When not run on a remote server, this test works in Firefox, but not in Chrome. Only intended for testing. -->

<html>

<script type="text/javascript" src="sjtl-1.0.0-min.js"></script>
<object id="sjtl_test_template_object" data="sjtl_test_template_min.html" style="float:left;width:0%;height:0%;"></object>
Note: When not run on a remote server, this test works in Firefox, but not in Chrome. Only intended for testing.<br>
<button id="btn_dogfish" onclick='render_fish("dogfish")'>Dogfish</button>
<button id="btn_catfish" onclick='render_fish("catfish")'>Catfish</button>
<button id="btn_salmom" onclick='render_fish("salmon")'>Salmon</button>&nbsp;Note that there is no "Salmon" data. This is meant to fail gracefully.
<br>&nbsp;<br>
<input type="checkbox" id="chk_use_arrays">Use arrays instead of objects<br>

<script>
    document.getElementById("btn_dogfish").disabled = true;
    document.getElementById("btn_catfish").disabled = true;
    document.getElementById("btn_salmom").disabled = true;
    
    document.getElementById("sjtl_test_template_object").onload = function() 
    {
        document.getElementById("sjtl_template_000").innerHTML = document.getElementById("sjtl_test_template_object").contentDocument.getElementById("sjtl_template_000").innerHTML;
        document.getElementById("btn_dogfish").disabled = false;
        document.getElementById("btn_catfish").disabled = false;
        document.getElementById("btn_salmom").disabled = false;
    };
</script>

<div id='sjtl_template_000'>
</div>

<div id='sjtl_render_000'>
</div>

<script>
    
    function render_fish(fishtype)
    {
        document.getElementById("sjtl_render_000").innerHTML = "";
        document.getElementById("btn_dogfish").disabled = true;
        document.getElementById("btn_catfish").disabled = true;
        document.getElementById("btn_salmom").disabled = true;

        var sjtl = new sjtl_engine;
        sjtl.s_template_divtag_id = "sjtl_template_000";
        sjtl.s_render_divtag_id = "sjtl_render_000";
        
        if(document.getElementById("chk_use_arrays").checked == true) use_arrays = "true";
        else use_arrays = "false";

        try
        {
            if(fishtype == "catfish") sjtl.run_sjtl('{"mytitle" : "Fake data based on U.S. federal aquaculture data.","lbl_use_arrays" : "' + use_arrays + '","use_arrays" : ' + use_arrays + ',"mytable_usearrays" :{"mylist_usearrays" : [["SOURCE_ID", "COMMODITY_DESC","GEOGRAPHY_CODE","GEOGRAPHY_DESC","ATTRIBUTE_DESC","UNIT_DESC","YEAR_ID","TIMEPERIOD_ID","AMOUNT"],[1, "Catfish",9000,"United States of America","Farm Price","Cents/Pound",1986,2,70],[4,"Catfish",9000,"United States of America","Imports, QTY","1,000 Pounds",1989,11,66],[141,"Catfish",9000,"United States of America","Processor Price","Cents/Pound",2009,5,254.7],[131,"Catfish",9000,"United States of America","Farm Sales to Processors","1,000 Pounds",1987,5,21623],[121,"Catfish",9000,"United States of America","Processor Sales, All categories","1,000 Pounds",1988,8,12453],[111,"Catfish",9000,"United States of America","Processor Inventories","1,000 Pounds",2000,3,11921],[201,"Catfish-Stockers",9000,"United States of America","Producer Inventories","1,000 EA",2011,17,380660],[301,"Catfish-Small Food-size",9000,"United States of America","Producer Inventories","1,000 EA",1996,17,156297],[401,"Catfish-Medium Food-size",9000,"United States of America","Producer Inventories","1,000 EA",2001,17,87926],[501,"Catfish-Large Food-size",9000,"United States of America","Producer Inventories","1,000 EA",2006,17,10823],[601,"Catfish-Frozen Whole Fish Dressed",9000,"United States of America","Processor Price","$/Pound",1994,4,2.01],[107,"Catfish-Frozen Filleted Fish",9000,"United States of America","Processor Price","$/Pound",1986,10,2.51],[181,"Catfish-Frozen Whole Fish Dressed",9000,"United States of America","Processor Sales","1,000 Pounds",2013,1,574],[901,"Catfish-Frozen Filleted Fish",9000,"United States of America","Processor Inventories","1,000 Pounds",2010,5,6845],[1001,"Catfish-Frozen Filleted Fish",9000,"United States of America","Processor Sales","1,000 Pounds",1986,9,2240],[1101,"Catfish-Frozen Other Fish",9000,"United States of America","Processor Price","$/Pound",1990,7,2.12],[1201,"Catfish-Frozen Other Fish",9000,"United States of America","Processor Inventories","1,000 Pounds",2012,6,1248],[1202,"Catfish-Frozen Other Fish, Steaks",9000,"United States of America","Processor Price","$/Pound",2002,2,1.64]]    },"mytable_useobjects" :{"myheader_useobjects" : ["SOURCE_ID","COMMODITY_DESC","GEOGRAPHY_CODE","GEOGRAPHY_DESC","ATTRIBUTE_DESC","UNIT_DESC","YEAR_ID","TIMEPERIOD_ID","AMOUNT"], "mylist_useobjects" : [{"SOURCE_ID" : 1,"COMMODITY_DESC" : "Catfish","GEOGRAPHY_CODE" : 9000,"GEOGRAPHY_DESC" : "United States of America","ATTRIBUTE_DESC" : "Farm Price","UNIT_DESC" : "Cents/Pound","YEAR_ID" : 1986,"TIMEPERIOD_ID" : 2,"AMOUNT" : 70},{"SOURCE_ID" : 4,"COMMODITY_DESC" : "Catfish","GEOGRAPHY_CODE" : 9000,"GEOGRAPHY_DESC" : "United States of America","ATTRIBUTE_DESC" : "Imports, QTY","UNIT_DESC" : "1,000 Pounds","YEAR_ID" : 1989,"TIMEPERIOD_ID" : 11,"AMOUNT" : 66},{"SOURCE_ID" : 141,"COMMODITY_DESC" : "Catfish","GEOGRAPHY_CODE" : 9000,"GEOGRAPHY_DESC" : "United States of America","ATTRIBUTE_DESC" : "Processor Price","UNIT_DESC" : "Cents/Pound","YEAR_ID" : 2009,"TIMEPERIOD_ID" : 5,"AMOUNT" : 254.7},{"SOURCE_ID" : 131,"COMMODITY_DESC" : "Catfish","GEOGRAPHY_CODE" : 9000,"GEOGRAPHY_DESC" : "United States of America","ATTRIBUTE_DESC" : "Farm Sales to Processors","UNIT_DESC" : "1,000 Pounds","YEAR_ID" : 1987,"TIMEPERIOD_ID" : 5,"AMOUNT" : 21623},{"SOURCE_ID" : 121,"COMMODITY_DESC" : "Catfish","GEOGRAPHY_CODE" : 9000,"GEOGRAPHY_DESC" : "United States of America","ATTRIBUTE_DESC" : "Processor Sales, All categories","UNIT_DESC" : "1,000 Pounds","YEAR_ID" : 1988,"TIMEPERIOD_ID" : 8,"AMOUNT" : 12453},{"SOURCE_ID" : 111,"COMMODITY_DESC" : "Catfish","GEOGRAPHY_CODE" : 9000,"GEOGRAPHY_DESC" : "United States of America","ATTRIBUTE_DESC" : "Processor Inventories","UNIT_DESC" : "1,000 Pounds","YEAR_ID" : 2000,"TIMEPERIOD_ID" : 3,"AMOUNT" : 11921},{"SOURCE_ID" : 201,"COMMODITY_DESC" : "Catfish-Stockers","GEOGRAPHY_CODE" : 9000,"GEOGRAPHY_DESC" : "United States of America","ATTRIBUTE_DESC" : "Producer Inventories","UNIT_DESC" : "1,000 EA","YEAR_ID" : 2011,"TIMEPERIOD_ID" : 17,"AMOUNT" : 380660},{"SOURCE_ID" : 301,"COMMODITY_DESC" : "Catfish-Small Food-size","GEOGRAPHY_CODE" : 9000,"GEOGRAPHY_DESC" : "United States of America","ATTRIBUTE_DESC" : "Producer Inventories","UNIT_DESC" : "1,000 EA","YEAR_ID" : 1996,"TIMEPERIOD_ID" : 17,"AMOUNT" : 156297},{"SOURCE_ID" : 401,"COMMODITY_DESC" : "Catfish-Medium Food-size","GEOGRAPHY_CODE" : 9000,"GEOGRAPHY_DESC" : "United States of America","ATTRIBUTE_DESC" : "Producer Inventories","UNIT_DESC" : "1,000 EA","YEAR_ID" : 2001,"TIMEPERIOD_ID" : 17,"AMOUNT" : 87926},{"SOURCE_ID" : 501,"COMMODITY_DESC" : "Catfish-Large Food-size","GEOGRAPHY_CODE" : 9000,"GEOGRAPHY_DESC" : "United States of America","ATTRIBUTE_DESC" : "Producer Inventories","UNIT_DESC" : "1,000 EA","YEAR_ID" : 2006,"TIMEPERIOD_ID" : 17,"AMOUNT" : 10823},{"SOURCE_ID" : 601,"COMMODITY_DESC" : "Catfish-Frozen Whole Fish Dressed","GEOGRAPHY_CODE" : 9000,"GEOGRAPHY_DESC" : "United States of America","ATTRIBUTE_DESC" : "Processor Price","UNIT_DESC" : "$/Pound","YEAR_ID" : 1994,"TIMEPERIOD_ID" : 4,"AMOUNT" : 2.01},{"SOURCE_ID" : 107,"COMMODITY_DESC" : "Catfish-Frozen Filleted Fish","GEOGRAPHY_CODE" : 9000,"GEOGRAPHY_DESC" : "United States of America","ATTRIBUTE_DESC" : "Processor Price","UNIT_DESC" : "$/Pound","YEAR_ID" : 1986,"TIMEPERIOD_ID" : 10,"AMOUNT" : 2.51},{"SOURCE_ID" : 181,"COMMODITY_DESC" : "Catfish-Frozen Whole Fish Dressed","GEOGRAPHY_CODE" : 9000,"GEOGRAPHY_DESC" : "United States of America","ATTRIBUTE_DESC" : "Processor Sales","UNIT_DESC" : "1,000 Pounds","YEAR_ID" : 2013,"TIMEPERIOD_ID" : 1,"AMOUNT" : 574},{"SOURCE_ID" : 901,"COMMODITY_DESC" : "Catfish-Frozen Filleted Fish","GEOGRAPHY_CODE" : 9000,"GEOGRAPHY_DESC" : "United States of America","ATTRIBUTE_DESC" : "Processor Inventories","UNIT_DESC" : "1,000 Pounds","YEAR_ID" : 2010,"TIMEPERIOD_ID" : 5,"AMOUNT" : 6845},{"SOURCE_ID" : 1001,"COMMODITY_DESC" : "Catfish-Frozen Filleted Fish","GEOGRAPHY_CODE" : 9000,"GEOGRAPHY_DESC" : "United States of America","ATTRIBUTE_DESC" : "Processor Sales","UNIT_DESC" : "1,000 Pounds","YEAR_ID" : 1986,"TIMEPERIOD_ID" : 9,"AMOUNT" : 2240},{"SOURCE_ID" : 1101,"COMMODITY_DESC" : "Catfish-Frozen Other Fish","GEOGRAPHY_CODE" : 9000,"GEOGRAPHY_DESC" : "United States of America","ATTRIBUTE_DESC" : "Processor Price","UNIT_DESC" : "$/Pound","YEAR_ID" : 1990,"TIMEPERIOD_ID" : 7,"AMOUNT" : 2.12},{"SOURCE_ID" : 1201,"COMMODITY_DESC" : "Catfish-Frozen Other Fish","GEOGRAPHY_CODE" : 9000,"GEOGRAPHY_DESC" : "United States of America","ATTRIBUTE_DESC" : "Processor Inventories","UNIT_DESC" : "1,000 Pounds","YEAR_ID" : 2012,"TIMEPERIOD_ID" : 6,"AMOUNT" : 1248},{"SOURCE_ID" : 1202,"COMMODITY_DESC" : "Catfish-Frozen Other Fish, Steaks","GEOGRAPHY_CODE" : 9000,"GEOGRAPHY_DESC" : "United States of America","ATTRIBUTE_DESC" : "Processor Price","UNIT_DESC" : "$/Pound","YEAR_ID" : 2002,"TIMEPERIOD_ID" : 2,"AMOUNT" : 1.64}]}}');
            else if(fishtype == "dogfish") sjtl.run_sjtl('{"mytitle" : "Fake data based on U.S. Federal aquaculture data.","lbl_use_arrays" : "' + use_arrays + '","use_arrays" : ' + use_arrays + ',"mytable_usearrays" :{"mylist_usearrays" : [["SOURCE_ID", "COMMODITY_DESC","GEOGRAPHY_CODE","GEOGRAPHY_DESC","ATTRIBUTE_DESC","UNIT_DESC","YEAR_ID","TIMEPERIOD_ID","AMOUNT"],[1, "Dogfish",9000,"United States of America","Farm Price","Cents/Pound",1986,2,70],[4,"Dogfish",9000,"United States of America","Imports, QTY","1,000 Pounds",1989,11,66],[141,"Dogfish",9000,"United States of America","Processor Price","Cents/Pound",2009,5,254.7],[131,"Dogfish",9000,"United States of America","Farm Sales to Processors","1,000 Pounds",1987,5,21623],[121,"Dogfish",9000,"United States of America","Processor Sales, All categories","1,000 Pounds",1988,8,12453],[111,"Dogfish",9000,"United States of America","Processor Inventories","1,000 Pounds",2000,3,11921],[201,"Dogfish-Stockers",9000,"United States of America","Producer Inventories","1,000 EA",2011,17,380660],[301,"Dogfish-Small Food-size",9000,"United States of America","Producer Inventories","1,000 EA",1996,17,156297],[401,"Dogfish-Medium Food-size",9000,"United States of America","Producer Inventories","1,000 EA",2001,17,87926],[501,"Dogfish-Large Food-size",9000,"United States of America","Producer Inventories","1,000 EA",2006,17,10823],[601,"Dogfish-Frozen Whole Fish Dressed",9000,"United States of America","Processor Price","$/Pound",1994,4,2.01],[107,"Dogfish-Frozen Filleted Fish",9000,"United States of America","Processor Price","$/Pound",1986,10,2.51],[181,"Dogfish-Frozen Whole Fish Dressed",9000,"United States of America","Processor Sales","1,000 Pounds",2013,1,574],[901,"Dogfish-Frozen Filleted Fish",9000,"United States of America","Processor Inventories","1,000 Pounds",2010,5,6845],[1001,"Dogfish-Frozen Filleted Fish",9000,"United States of America","Processor Sales","1,000 Pounds",1986,9,2240],[1101,"Dogfish-Frozen Other Fish",9000,"United States of America","Processor Price","$/Pound",1990,7,2.12],[1201,"Dogfish-Frozen Other Fish",9000,"United States of America","Processor Inventories","1,000 Pounds",2012,6,1248],[1202,"Dogfish-Frozen Other Fish, Steaks",9000,"United States of America","Processor Price","$/Pound",2002,2,1.64]]    },"mytable_useobjects" :{"myheader_useobjects" : ["SOURCE_ID","COMMODITY_DESC","GEOGRAPHY_CODE","GEOGRAPHY_DESC","ATTRIBUTE_DESC","UNIT_DESC","YEAR_ID","TIMEPERIOD_ID","AMOUNT"], "mylist_useobjects" : [{"SOURCE_ID" : 1,"COMMODITY_DESC" : "Dogfish","GEOGRAPHY_CODE" : 9000,"GEOGRAPHY_DESC" : "United States of America","ATTRIBUTE_DESC" : "Farm Price","UNIT_DESC" : "Cents/Pound","YEAR_ID" : 1986,"TIMEPERIOD_ID" : 2,"AMOUNT" : 70},{"SOURCE_ID" : 4,"COMMODITY_DESC" : "Dogfish","GEOGRAPHY_CODE" : 9000,"GEOGRAPHY_DESC" : "United States of America","ATTRIBUTE_DESC" : "Imports, QTY","UNIT_DESC" : "1,000 Pounds","YEAR_ID" : 1989,"TIMEPERIOD_ID" : 11,"AMOUNT" : 66},{"SOURCE_ID" : 141,"COMMODITY_DESC" : "Dogfish","GEOGRAPHY_CODE" : 9000,"GEOGRAPHY_DESC" : "United States of America","ATTRIBUTE_DESC" : "Processor Price","UNIT_DESC" : "Cents/Pound","YEAR_ID" : 2009,"TIMEPERIOD_ID" : 5,"AMOUNT" : 254.7},{"SOURCE_ID" : 131,"COMMODITY_DESC" : "Dogfish","GEOGRAPHY_CODE" : 9000,"GEOGRAPHY_DESC" : "United States of America","ATTRIBUTE_DESC" : "Farm Sales to Processors","UNIT_DESC" : "1,000 Pounds","YEAR_ID" : 1987,"TIMEPERIOD_ID" : 5,"AMOUNT" : 21623},{"SOURCE_ID" : 121,"COMMODITY_DESC" : "Dogfish","GEOGRAPHY_CODE" : 9000,"GEOGRAPHY_DESC" : "United States of America","ATTRIBUTE_DESC" : "Processor Sales, All categories","UNIT_DESC" : "1,000 Pounds","YEAR_ID" : 1988,"TIMEPERIOD_ID" : 8,"AMOUNT" : 12453},{"SOURCE_ID" : 111,"COMMODITY_DESC" : "Dogfish","GEOGRAPHY_CODE" : 9000,"GEOGRAPHY_DESC" : "United States of America","ATTRIBUTE_DESC" : "Processor Inventories","UNIT_DESC" : "1,000 Pounds","YEAR_ID" : 2000,"TIMEPERIOD_ID" : 3,"AMOUNT" : 11921},{"SOURCE_ID" : 201,"COMMODITY_DESC" : "Dogfish-Stockers","GEOGRAPHY_CODE" : 9000,"GEOGRAPHY_DESC" : "United States of America","ATTRIBUTE_DESC" : "Producer Inventories","UNIT_DESC" : "1,000 EA","YEAR_ID" : 2011,"TIMEPERIOD_ID" : 17,"AMOUNT" : 380660},{"SOURCE_ID" : 301,"COMMODITY_DESC" : "Dogfish-Small Food-size","GEOGRAPHY_CODE" : 9000,"GEOGRAPHY_DESC" : "United States of America","ATTRIBUTE_DESC" : "Producer Inventories","UNIT_DESC" : "1,000 EA","YEAR_ID" : 1996,"TIMEPERIOD_ID" : 17,"AMOUNT" : 156297},{"SOURCE_ID" : 401,"COMMODITY_DESC" : "Dogfish-Medium Food-size","GEOGRAPHY_CODE" : 9000,"GEOGRAPHY_DESC" : "United States of America","ATTRIBUTE_DESC" : "Producer Inventories","UNIT_DESC" : "1,000 EA","YEAR_ID" : 2001,"TIMEPERIOD_ID" : 17,"AMOUNT" : 87926},{"SOURCE_ID" : 501,"COMMODITY_DESC" : "Dogfish-Large Food-size","GEOGRAPHY_CODE" : 9000,"GEOGRAPHY_DESC" : "United States of America","ATTRIBUTE_DESC" : "Producer Inventories","UNIT_DESC" : "1,000 EA","YEAR_ID" : 2006,"TIMEPERIOD_ID" : 17,"AMOUNT" : 10823},{"SOURCE_ID" : 601,"COMMODITY_DESC" : "Dogfish-Frozen Whole Fish Dressed","GEOGRAPHY_CODE" : 9000,"GEOGRAPHY_DESC" : "United States of America","ATTRIBUTE_DESC" : "Processor Price","UNIT_DESC" : "$/Pound","YEAR_ID" : 1994,"TIMEPERIOD_ID" : 4,"AMOUNT" : 2.01},{"SOURCE_ID" : 107,"COMMODITY_DESC" : "Dogfish-Frozen Filleted Fish","GEOGRAPHY_CODE" : 9000,"GEOGRAPHY_DESC" : "United States of America","ATTRIBUTE_DESC" : "Processor Price","UNIT_DESC" : "$/Pound","YEAR_ID" : 1986,"TIMEPERIOD_ID" : 10,"AMOUNT" : 2.51},{"SOURCE_ID" : 181,"COMMODITY_DESC" : "Dogfish-Frozen Whole Fish Dressed","GEOGRAPHY_CODE" : 9000,"GEOGRAPHY_DESC" : "United States of America","ATTRIBUTE_DESC" : "Processor Sales","UNIT_DESC" : "1,000 Pounds","YEAR_ID" : 2013,"TIMEPERIOD_ID" : 1,"AMOUNT" : 574},{"SOURCE_ID" : 901,"COMMODITY_DESC" : "Dogfish-Frozen Filleted Fish","GEOGRAPHY_CODE" : 9000,"GEOGRAPHY_DESC" : "United States of America","ATTRIBUTE_DESC" : "Processor Inventories","UNIT_DESC" : "1,000 Pounds","YEAR_ID" : 2010,"TIMEPERIOD_ID" : 5,"AMOUNT" : 6845},{"SOURCE_ID" : 1001,"COMMODITY_DESC" : "Dogfish-Frozen Filleted Fish","GEOGRAPHY_CODE" : 9000,"GEOGRAPHY_DESC" : "United States of America","ATTRIBUTE_DESC" : "Processor Sales","UNIT_DESC" : "1,000 Pounds","YEAR_ID" : 1986,"TIMEPERIOD_ID" : 9,"AMOUNT" : 2240},{"SOURCE_ID" : 1101,"COMMODITY_DESC" : "Dogfish-Frozen Other Fish","GEOGRAPHY_CODE" : 9000,"GEOGRAPHY_DESC" : "United States of America","ATTRIBUTE_DESC" : "Processor Price","UNIT_DESC" : "$/Pound","YEAR_ID" : 1990,"TIMEPERIOD_ID" : 7,"AMOUNT" : 2.12},{"SOURCE_ID" : 1201,"COMMODITY_DESC" : "Dogfish-Frozen Other Fish","GEOGRAPHY_CODE" : 9000,"GEOGRAPHY_DESC" : "United States of America","ATTRIBUTE_DESC" : "Processor Inventories","UNIT_DESC" : "1,000 Pounds","YEAR_ID" : 2012,"TIMEPERIOD_ID" : 6,"AMOUNT" : 1248},{"SOURCE_ID" : 1202,"COMMODITY_DESC" : "Dogfish-Frozen Other Fish, Steaks","GEOGRAPHY_CODE" : 9000,"GEOGRAPHY_DESC" : "United States of America","ATTRIBUTE_DESC" : "Processor Price","UNIT_DESC" : "$/Pound","YEAR_ID" : 2002,"TIMEPERIOD_ID" : 2,"AMOUNT" : 1.64}]}}');
        }
        finally
        {
            delete sjtl;
            document.getElementById("btn_dogfish").disabled = false;
            document.getElementById("btn_catfish").disabled = false;
            document.getElementById("btn_salmom").disabled = false;
        }
    }
    
</script>

</html>
